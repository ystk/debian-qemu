From: Prasad J Pandit <address@hidden>

When processing Task Priorty Register(TPR) access, it could leak
automatic stack variable 'imm32' in patch_instruction().
Initialise the variable to avoid it.

Reported by: Donghai Zdh <address@hidden>

Signed-off-by: Prasad J Pandit <address@hidden>


Origin: ubuntu, https://launchpad.net/ubuntu/+source/qemu/2.0.0+dfsg-2ubuntu1.43
Bug-Debian: https://bugs.debian.org/821062
Reviewed-by: Santiago R.R. <santiagorr@riseup.net>
---
 hw/i386/kvmvapic.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

Index: qemu-2.0.0+dfsg/hw/i386/kvmvapic.c
===================================================================
--- qemu-2.0.0+dfsg.orig/hw/i386/kvmvapic.c	2016-05-10 14:57:45.112566229 -0400
+++ qemu-2.0.0+dfsg/hw/i386/kvmvapic.c	2016-05-10 14:57:45.048565382 -0400
@@ -394,7 +394,7 @@
     CPUX86State *env = &cpu->env;
     VAPICHandlers *handlers;
     uint8_t opcode[2];
-    uint32_t imm32;
+    uint32_t imm32 = 0;
     target_ulong current_pc = 0;
     target_ulong current_cs_base = 0;
     int current_flags = 0;
